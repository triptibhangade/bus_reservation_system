<%- model_class = BusOwner -%>
<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>
<!-- -------------------- Errors -------------------- -->
<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @bus_owner.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:email) %>:</strong></dt>
  <dd><%= @bus_owner.email %></dd>
</dl>
<hr>
<% if !@my_buses.blank? %>
  <h3>My Buses</h3>
  <table class="table">
    <tr>
      <th>Bus Name</th>
      <th>Route</th>
      <th>Action</th>
    </tr>
    <% @my_buses.each do |bus| %>
    <tr>
      <td><a href="buses/<%=bus.id%>"><%= bus.name %></a></td>
      <td><%= bus.source %> - <%= bus.destination %></td>
      <td><%= link_to "Remove buses",
                  bus_path(bus),
                  :method => :delete,
                  :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                  :class => 'btn btn-xs btn-danger' %>
      </td>
    </tr>
    <% end %>
  </table>
<hr>
<% end %>

<!-- -------------------- Bus Owner Reservation -------------------- -->
<% if !@bus_owner.reservations.blank? %>
  <h3>My Reservations</h3>
  <table class="table">
    <tr>
      <th>Date</th>
      <th>Bus Name</th>
      <th>Reservation Date</th>
      <th>Seats</th>
      <th>Action</th>
    </tr>
    <% @bus_owner.reservations.each do |reservation| %>
      <tr>
        <td><%= date_of_booking(reservation) %></td>
        <td><a href="/buses/<%= reservation.bus.id %>"><%= reservation.bus.name %> </a></td>
        <td><%=reservation_date(reservation)%> ( <%=reservation_day(reservation) %> )</td>
        <td><%=reservation.seat %> Seats</td>
        <td><%= link_to 'Cancel Reservation',
                    bus_reservation_path(reservation.bus_id, reservation.id),
                    :method => :delete, 
                    :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                    :class => 'btn btn-xs btn-danger' %>
        </td>
      </tr>
    <% end %>
  </table>
  <hr>
<%end%>
<!-- -------------------- Buttons -------------------- -->
<div>
  <%= link_to t('.back', :default => t("helpers.links.back")),
                buses_path, :class => 'btn btn-default'  %>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                 bus_owner_profile_edit_path, :class => 'btn btn-default' %>
  <%= link_to "Deactivate My Account", registration_path(@bus_owner), :class => 'btn btn-danger', data: { confirm: "Are you sure?" }, method: :delete %>
</div>